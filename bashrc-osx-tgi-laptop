# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
    xterm) colorize=yes;;
    xterm-color) colorize=yes;;
    xterm-256color) colorize=yes;;
    screen-256color) colorize=yes;;
    eterm-color) colorize=yes;;
esac

if [ "$colorize" == "yes" ]; then
    # enable aliases
    alias ls='ls -G'
    alias grep='grep --color=auto'

    # colors via tput
    reset=$(tput sgr0)
    bold=$(tput bold)
    grey=$(tput setaf 0)
    red=$(tput setaf 1)
    green=$(tput setaf 2)
    yellow=$(tput setaf 3)
    blue=$(tput setaf 4)
    magenta=$(tput setaf 5)
    cyan=$(tput setaf 6)
    white=$(tput setaf 7)

    xreset=$(tput -T xterm sgr0)
    xbold=$(tput -T xterm bold)
    xgrey=$(tput -T xterm setaf 0)
    xred=$(tput -T xterm setaf 1)
    xgreen=$(tput -T xterm setaf 2)
    xyellow=$(tput -T xterm setaf 3)
    xblue=$(tput -T xterm setaf 4)
    xmagenta=$(tput -T xterm setaf 5)
    xcyan=$(tput -T xterm setaf 6)
    xwhite=$(tput -T xterm setaf 7)

    # setup a custom prompt
    if [ "$TERM" = "eterm-color" ]; then
        # emacs prompt
        PS1='╭─( ${yellow}\w${reset}${red}$(__git_ps1 " (%s)")${reset} as ${green}\u${reset} at ${cyan}\h${reset} on ${yellow}\D{%m/%d} \t${reset} )\n╰─${bold}${red}\$${reset} '
    else 
        # regular xterm prompt
        PS1='╭─\[${xreset}\]( \[${xyellow}\]\w\[${xred}\]$(__git_ps1 " (%s)")\[${xreset}\] as \[${xgreen}\]\u\[${xreset}\] at \[${xcyan}\]\h\[${xreset}\] on \[${xyellow}\]\D{%m/%d} \t\[${xreset}\] )\n╰─\[${xbold}\]\[${xred}\]$\[${xreset}\] '
    fi
fi

unset colorize

# enable branch notification niceties on the prompt
if [ -f /usr/share/git-core/git-prompt.sh ]; then
    source /usr/share/git-core/git-prompt.sh
else
    source ~/.git-prompt.sh
fi

# get vim's slimux/tmux integration to work correctly on MacOS (OSX)
# see https://github.com/epeli/slimux/issues/61
export EVENT_NOKQUEUE=1
export EVENT_NOPOLL=1

# location of custom emacs
alias emacs=/usr/local/Cellar/emacs-plus/24.5/bin/emacs

# commands beginning with one space don't get stored in .bash_history
export HISTIGNORE=' *'

# original $PATH from initial purchase
#export PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin

# account for 'homebrew'ed software
export PATH=$HOME/.goenv/bin:$HOME/.pyenv/bin:$HOME/.rbenv/bin:$HOME/.Renv/bin:$HOME/.plenv/bin:$HOME/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin

# rbenv setup
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi

# pyenv setup
if which pyenv > /dev/null; then eval "$(pyenv init -)"; fi

# pyenv virtualenv setup
if which pyenv > /dev/null; then eval "$(pyenv virtualenv-init -)"; fi

# plenv setup
if which plenv > /dev/null; then eval "$(plenv init -)"; fi

# Renv setup
if which Renv > /dev/null; then eval "$(Renv init -)"; fi

# goenv setup
if which goenv > /dev/null; then eval "$(goenv init -)"; fi

# java setup
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home
export PATH=$HOME/software/maven/apache-maven-3.3.9/bin:$PATH

# scala setup
export SCALA_HOME=$HOME/software/scala/scala-2.11.8
export PATH=$SCALA_HOME/bin:$PATH

# google-cloud
source /usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/path.bash.inc
source /usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/completion.bash.inc

# ocaml/opam setup
source $HOME/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true

# roswell/common-lisp setup
export PATH=$HOME/.roswell/bin:$HOME/roswell/bin:$PATH

# iTerm2 shortcuts
# based on http://stackoverflow.com/questions/8598021/iterm-2-profiles
function it2profile() { echo -e "\033]50;SetProfile=$1\a"; }
export -f it2profile

# set the default editor
alias vim='mvim -v'
alias emacs="/usr/local/bin/emacs"
export EDITOR=/usr/bin/vim

